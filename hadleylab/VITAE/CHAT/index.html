<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEXTER VITAE CHAT | CANONIC</title>
    <link rel="stylesheet" href="https://canonic-foundation.github.io/assets/style.css">
    <style>
        .chat-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        .chat-window {
            background: #0a0a0a;
            border: 1px solid #222;
            border-radius: 8px;
            min-height: 450px;
            max-height: 60vh;
            display: flex;
            flex-direction: column;
        }
        .chat-messages {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
        }
        .message {
            margin-bottom: 1.5rem;
            display: flex;
            gap: 1rem;
        }
        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: 4px;
            background: #222;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            font-weight: bold;
            flex-shrink: 0;
        }
        .message-avatar.agent {
            background: var(--accent);
            color: #000;
        }
        .message-content {
            flex: 1;
        }
        .message-role {
            font-size: 0.7rem;
            color: #666;
            margin-bottom: 0.35rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
        .message-text {
            color: #ccc;
            line-height: 1.7;
            font-size: 0.95rem;
        }
        .message-text a {
            color: var(--accent);
        }
        .message-text strong {
            color: #fff;
        }
        .chat-input-area {
            border-top: 1px solid #222;
            padding: 1rem 1.25rem;
            display: flex;
            gap: 0.75rem;
            background: #0a0a0a;
            border-radius: 0 0 8px 8px;
        }
        .chat-input {
            flex: 1;
            background: #111;
            border: 1px solid #333;
            border-radius: 4px;
            padding: 0.85rem 1rem;
            color: #fff;
            font-size: 0.95rem;
            font-family: inherit;
            transition: border-color 0.2s;
        }
        .chat-input:focus {
            outline: none;
            border-color: var(--accent);
        }
        .chat-input::placeholder {
            color: #555;
        }
        .chat-btn {
            background: var(--accent);
            color: #000;
            border: none;
            padding: 0.85rem 1.75rem;
            border-radius: 4px;
            font-weight: bold;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.85rem;
            letter-spacing: 0.05em;
            transition: opacity 0.2s, transform 0.2s;
        }
        .chat-btn:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }
        .chat-btn:active {
            transform: translateY(0);
        }
        .quick-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1.5rem;
            justify-content: center;
        }
        .quick-btn {
            background: #111;
            border: 1px solid #333;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            color: #888;
            font-size: 0.8rem;
            cursor: pointer;
            font-family: inherit;
            transition: all 0.2s;
        }
        .quick-btn:hover {
            border-color: var(--accent);
            color: var(--accent);
        }
        .evidence-tag {
            display: inline-block;
            padding: 0.15rem 0.4rem;
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid var(--accent);
            border-radius: 3px;
            font-size: 0.7rem;
            color: var(--accent);
            margin-left: 0.25rem;
            text-decoration: none;
        }
        .evidence-tag:hover {
            background: rgba(0, 255, 136, 0.2);
        }
        /* How it works section */
        .how-section {
            max-width: 800px;
            margin: 3rem auto 0;
            padding: 0 1rem;
        }
        .how-title {
            color: var(--accent);
            font-size: 0.8rem;
            letter-spacing: 0.15em;
            text-align: center;
            margin-bottom: 0.5rem;
        }
        .how-subtitle {
            color: #666;
            font-size: 0.75rem;
            text-align: center;
            margin-bottom: 1.5rem;
        }
        .flow {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        .flow-item {
            background: #111;
            border: 1px solid #333;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            color: #888;
            font-size: 0.8rem;
        }
        .flow-arrow {
            color: var(--accent);
            font-size: 0.9rem;
        }
        /* Footer */
        .chat-footer {
            max-width: 800px;
            margin: 3rem auto 2rem;
            padding: 1.5rem 1rem;
            text-align: center;
            border-top: 1px solid #222;
        }
        .chat-footer a {
            color: #666;
            text-decoration: none;
            font-size: 0.8rem;
            margin: 0 0.75rem;
            transition: color 0.2s;
        }
        .chat-footer a:hover {
            color: var(--accent);
        }
        .powered-by {
            margin-top: 1rem;
            font-size: 0.7rem;
            color: #444;
        }
        .powered-by a {
            color: #555;
        }
        .powered-by a:hover {
            color: var(--accent);
        }
        /* Back button FAB */
        .back-fab {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 50px;
            height: 50px;
            background: #111;
            border: 1px solid #333;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            color: #888;
            font-size: 1.2rem;
            transition: all 0.2s;
            z-index: 100;
        }
        .back-fab:hover {
            border-color: var(--accent);
            color: var(--accent);
            transform: scale(1.05);
        }
        .back-fab::after {
            content: 'Back to VITAE';
            position: absolute;
            right: 60px;
            background: #111;
            border: 1px solid #333;
            padding: 0.4rem 0.8rem;
            border-radius: 4px;
            font-size: 0.7rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
        }
        .back-fab:hover::after {
            opacity: 1;
        }
        /* Mobile */
        @media (max-width: 640px) {
            .chat-window {
                max-height: 50vh;
            }
            .flow {
                flex-direction: column;
            }
            .flow-arrow {
                transform: rotate(90deg);
            }
            .back-fab::after {
                display: none;
            }
        }
    </style>
</head>
<body class="has-sticky-nav">
    <nav class="topnav sticky">
        <a href="https://hadleylab-dexter.github.io" class="topnav-brand">D</a>
        <div class="topnav-links">
            <a href="../">VITAE</a>
            <a href="./" class="active">CHAT</a>
            <a href="https://github.com/hadleylab-dexter/hadleylab-dexter.github.io/blob/main/hadleylab/VITAE/VITAE.md">GITHUB</a>
        </div>
    </nav>

    <section class="hero" style="padding-bottom: 2rem;">
        <p class="tagline">Conversational Interface to Evidence</p>
        <img src="https://raw.githubusercontent.com/canonic-foundation/canonic/main/LANGUAGE/COMPLIANCE/assets/logo-business.svg" alt="CANONIC" style="height: 120px; margin-bottom: 1rem; filter: invert(1);">
        <span class="badge">VITAE CHAT</span>
    </section>

    <div class="chat-container">
        <div class="chat-window">
            <div class="chat-messages" id="messages">
                <div class="message">
                    <div class="message-avatar agent">D</div>
                    <div class="message-content">
                        <div class="message-role">DEXTER VITAE</div>
                        <div class="message-text">
                            Hi! I'm here to answer questions about <strong>Dr. Dexter Hadley</strong>.
                            <br><br>
                            <strong>Quick facts:</strong>
                            <br>- Physician-scientist with MD/PhD from Penn
                            <br>- 20,000+ mammograms read for breast cancer screening
                            <br>- Creator of MAMMOCHAT, an AI assistant for cancer care
                            <br>- Founder of CANONIC, making AI trustworthy
                            <br><br>
                            What would you like to know?
                        </div>
                    </div>
                </div>
            </div>
            <div class="chat-input-area">
                <input type="text" class="chat-input" id="userInput" placeholder="Ask about education, publications, clinical work..." onkeypress="if(event.key==='Enter')sendMessage()">
                <button class="chat-btn" onclick="sendMessage()">ASK</button>
            </div>
        </div>

        <div class="quick-actions">
            <button class="quick-btn" onclick="askQuestion('Where did he train?')">Education</button>
            <button class="quick-btn" onclick="askQuestion('What does he do as a doctor?')">Clinical</button>
            <button class="quick-btn" onclick="askQuestion('What papers has he published?')">Publications</button>
            <button class="quick-btn" onclick="askQuestion('What is MAMMOCHAT?')">MAMMOCHAT</button>
            <button class="quick-btn" onclick="askQuestion('What is CANONIC?')">CANONIC</button>
        </div>
    </div>

    <div class="how-section">
        <h3 class="how-title">HOW IT WORKS</h3>
        <p class="how-subtitle">Evidence-linked responses from the CV</p>
        <div class="flow">
            <span class="flow-item">Question</span>
            <span class="flow-arrow">-></span>
            <span class="flow-item">CV Context</span>
            <span class="flow-arrow">-></span>
            <span class="flow-item">Evidence Lookup</span>
            <span class="flow-arrow">-></span>
            <span class="flow-item">Answer + Links</span>
        </div>
    </div>

    <footer class="chat-footer">
        <a href="../">VITAE</a>
        <a href="https://canonic-foundation.github.io">CANONIC</a>
        <a href="https://github.com/hadleylab-dexter">GITHUB</a>
        <div class="powered-by">
            Powered by <a href="https://canonic-foundation.github.io">CANONIC</a>
        </div>
    </footer>

    <a href="../" class="back-fab" title="Back to VITAE"><span>&larr;</span></a>

    <script>
        // Source: https://github.com/hadleylab-dexter/hadleylab-dexter.github.io/blob/main/hadleylab/VITAE/VITAE.md

        // PUBLICATION INDEX
        const publications = [
            {
                id: 'hadley2016',
                year: 2016,
                title: 'Precision annotation of digital samples in NCBI\'s gene expression omnibus',
                journal: 'Oncotarget',
                citation: 'Oncotarget 7(14):17562-17571',
                topic: 'bioinformatics',
                keywords: ['gene expression', 'ncbi', 'geo', 'annotation', 'samples', 'digital', 'oncotarget'],
                coauthors: ['Atul Butte', 'James Pan', 'Osama El-Sayed', 'Jihad Aljabban', 'Tej D. Azad', 'Bin Chen', 'Marina Sirota', 'Mark A. Musen'],
                summary: 'This paper describes methods for automatically annotating biological samples in large public databases like NCBI GEO, making it easier for researchers to find and use existing data.'
            },
            {
                id: 'hoffman2017',
                year: 2017,
                title: 'Cis-eQTL-based trans-ethnic meta-analysis reveals novel genes associated with breast cancer risk',
                journal: 'PLoS Genetics',
                citation: 'PLoS Genetics 13(3):e1006690',
                pmid: '28362817',
                topic: 'breast cancer genetics',
                keywords: ['breast cancer', 'eqtl', 'genetics', 'trans-ethnic', 'meta-analysis', 'risk', 'genes', 'plos'],
                coauthors: ['Joshua D. Hoffman', 'John S. Witte'],
                summary: 'This study identified new genes linked to breast cancer risk by analyzing genetic data across different ethnic populations. It helps explain why some people are more likely to develop breast cancer.'
            },
            {
                id: 'aljabban2019',
                year: 2019,
                title: 'Tumorigenesis Related Gene Identification in Dermatomyositis Using Meta-Analysis',
                journal: 'Arthritis & Rheumatology',
                citation: 'Arthritis & Rheumatology',
                topic: 'autoimmune disease',
                keywords: ['dermatomyositis', 'autoimmune', 'tumorigenesis', 'cancer', 'arthritis', 'meta-analysis', 'genes'],
                coauthors: ['Jihad Aljabban'],
                summary: 'This research identified genes that might explain the connection between dermatomyositis (an autoimmune disease) and increased cancer risk. It could help doctors better monitor patients with this condition.'
            },
            {
                id: 'aljabban2020',
                year: 2020,
                title: 'Novel therapeutic avenues for cholangiocarcinoma treatment',
                journal: 'Journal of Clinical Oncology',
                citation: 'J Clin Oncol 38(4_suppl):584',
                doi: '10.1200/jco.2020.38.4_suppl.584',
                topic: 'bile duct cancer',
                keywords: ['cholangiocarcinoma', 'bile duct', 'cancer', 'therapy', 'treatment', 'jco', 'oncology'],
                coauthors: ['Jihad Aljabban'],
                summary: 'This paper explores new treatment options for cholangiocarcinoma (bile duct cancer), a rare but aggressive cancer with limited treatment options.'
            },
            {
                id: 'metcalf2024',
                year: 2024,
                title: 'ABC: AI, Blockchain, and Cybersecurity for Healthcare',
                journal: 'Productivity Press',
                citation: 'Productivity Press (Book)',
                topic: 'healthcare technology',
                keywords: ['ai', 'blockchain', 'cybersecurity', 'healthcare', 'book', 'technology', 'security', 'abc'],
                coauthors: ['David Metcalf', 'Vikram Dhillon'],
                summary: 'A comprehensive book explaining how artificial intelligence, blockchain technology, and cybersecurity can work together to improve healthcare. Written for both technical and non-technical readers.'
            },
            {
                id: 'radiology2019',
                year: 2019,
                title: 'A deep learning model to predict Alzheimer\'s disease using 18F-FDG PET',
                journal: 'Radiology',
                citation: 'Radiology 290:456-464',
                topic: 'alzheimer deep learning',
                keywords: ['alzheimer', 'deep learning', 'pet', 'fdg', 'radiology', 'imaging', 'prediction', 'brain'],
                coauthors: ['Yiming Ding', 'Benjamin Franc'],
                summary: 'This paper describes a deep learning model that can predict Alzheimer\'s disease from brain PET scans, potentially enabling earlier diagnosis and treatment.'
            },
            {
                id: 'jama2018',
                year: 2018,
                title: 'Development and Validation of ML Model to Estimate Delirium Risk',
                journal: 'JAMA Network Open',
                citation: 'JAMA Network Open 1(4):e181018',
                topic: 'delirium prediction',
                keywords: ['delirium', 'machine learning', 'jama', 'hospital', 'risk', 'prediction'],
                coauthors: ['Andrew Wong'],
                summary: 'This study developed a machine learning model to predict which hospital patients are at risk for delirium, helping doctors intervene earlier.'
            },
            {
                id: 'naturegenetics2012',
                year: 2012,
                title: 'Genome-wide CNV study associates mGluR networks with ADHD',
                journal: 'Nature Genetics',
                citation: 'Nature Genetics 44:78-84',
                topic: 'ADHD genetics',
                keywords: ['adhd', 'cnv', 'nature genetics', 'mglur', 'glutamate', 'genetics', 'genome'],
                coauthors: ['Josephine Elia', 'Hakon Hakonarson'],
                summary: 'This landmark study identified genetic variations associated with ADHD, specifically in glutamate receptor networks, opening new avenues for understanding and treating the condition.'
            },
            {
                id: 'naturecomm2014',
                year: 2014,
                title: 'Impact of metabotropic glutamate receptor networks on autism',
                journal: 'Nature Communications',
                citation: 'Nature Communications 5:4074',
                topic: 'autism genetics',
                keywords: ['autism', 'mglur', 'glutamate', 'nature communications', 'genetics', 'network'],
                coauthors: ['Hakon Hakonarson'],
                summary: 'This paper revealed how variations in glutamate receptor genes contribute to autism, providing insights into the biological basis of the condition.'
            }
        ];

        // In preparation
        const manuscripts = [
            {
                id: 'canonic2026',
                year: 2026,
                title: 'CANONIC: Constitutional Governance for Human-AI Collaborative Systems',
                status: 'Ready',
                topic: 'AI governance',
                keywords: ['canonic', 'constitutional', 'governance', 'ai', 'collaboration', 'systems'],
                summary: 'This upcoming paper describes CANONIC, a new framework for making AI systems trustworthy through constitutional governance principles.'
            },
            {
                id: 'mammochat2026',
                year: 2026,
                title: 'MAMMOCHAT: Clinical Breast Imaging AI',
                status: 'Ready',
                topic: 'clinical AI',
                keywords: ['mammochat', 'breast', 'imaging', 'ai', 'clinical', 'mammography'],
                summary: 'This paper describes MAMMOCHAT, an AI assistant designed to help breast cancer care teams communicate with patients and coordinate care.'
            }
        ];

        const responses = {
            'education': `<strong>Education</strong>
                <br><br>
                Dr. Hadley completed his <strong>MD and PhD</strong> at the University of Pennsylvania, where he studied how genes and computers can work together to understand diseases. He also earned a <strong>Master's in Engineering</strong> from Penn.
                <br><br>
                Before that, he graduated with honors from <strong>New College of Florida</strong>, studying natural science and programming.
                <br><br>
                He did additional training at <strong>Stanford</strong> in clinical laboratory medicine.
                <br><br>
                <a href="../" class="evidence-tag">View Full CV</a>`,

            'positions': `<strong>Career</strong>
                <br><br>
                Dr. Hadley currently leads:
                <br>- <strong>CANONIC Foundation</strong> - Making AI systems safer and more trustworthy
                <br>- <strong>HadleyLab</strong> - Research in healthcare AI
                <br>- <strong>American Board of Precision Medicine</strong> - Director of AI
                <br><br>
                Previously, he was a professor at UCF College of Medicine and UCSF, and worked at Stanford and Children's Hospital of Philadelphia.
                <br><br>
                <a href="../" class="evidence-tag">View Full CV</a>`,

            'publications': `<strong>Publications</strong>
                <br><br>
                Dr. Hadley has <strong>121 peer-reviewed publications</strong> on cancer genetics, bioinformatics, and AI in healthcare:
                <br><br>
                <strong>Selected Papers:</strong>
                <br>- <em>Deep learning Alzheimer's prediction</em> (2019) - Radiology
                <br>- <em>ML model for delirium risk</em> (2018) - JAMA Network Open
                <br>- <em>Precision annotation of GEO</em> (2017) - Scientific Data
                <br>- <em>mGluR networks in autism</em> (2014) - Nature Communications
                <br>- <em>CNV study ADHD</em> (2012) - Nature Genetics
                <br><br>
                <strong>Book:</strong>
                <br>- <em>AI, Blockchain, and Cybersecurity for Healthcare</em> (2024) - Productivity Press
                <br><br>
                Ask me about any specific paper for more details!
                <br><br>
                <a href="https://ncbi.nlm.nih.gov/myncbi/dexter.hadley.1/bibliography/public" class="evidence-tag">PubMed</a>
                <a href="https://scholar.google.com/citations?user=2o8ORCAAAAAJ&hl" class="evidence-tag">Google Scholar</a>`,

            'grants': `<strong>Research Funding</strong>
                <br><br>
                Dr. Hadley has secured over <strong>$10 million</strong> in research funding:
                <br><br>
                <strong>Major Grants:</strong>
                <br>- <strong>$2M</strong> Florida Cancer Innovation Fund (2025) - MAMMOCHAT
                <br>- <strong>$1.8M</strong> NIH/NIDDK (2016-2021) - Cardiovascular disease in CKD
                <br>- <strong>$1.6M</strong> NIH/NLM (2017-2021) - Deep learning digital curation
                <br>- <strong>$1.5M</strong> NIH/NIAMS (2019-2024) - AI for chronic pain
                <br>- <strong>$634K</strong> NIH/NCI BD2K (2016-2018) - Cancer genomics
                <br><br>
                <a href="https://reporter.nih.gov/search/kzBxkINzUk6ybEUgjY4o2Q/projects" class="evidence-tag">NIH Reporter</a>`,

            'ip': `<strong>Inventions</strong>
                <br><br>
                Dr. Hadley has <strong>8 patents</strong> (issued and pending):
                <br><br>
                - Autism genetics diagnosis methods
                <br>- ADHD genetic variation identification
                <br>- Alzheimer's deep learning prediction
                <br>- Constitutional AI governance systems
                <br><br>
                His inventions focus on ensuring AI follows rules and can prove it's behaving correctly - important for healthcare where mistakes can have serious consequences.
                <br><br>
                <a href="../" class="evidence-tag">View Full CV</a>`,

            'mentors': `<strong>Mentors</strong>
                <br><br>
                Dr. Hadley trained with leading researchers including:
                <br><br>
                - <strong>Dr. Atul Butte</strong> at Stanford and UCSF - a pioneer in using big data for medicine
                <br>- <strong>Dr. Junhyong Kim</strong> at Penn - his PhD advisor in computational biology
                <br>- <strong>Dr. Hakon Hakonarson</strong> at CHOP - leader in genomic medicine for children
                <br>- <strong>Dr. Benjamin Pinsky</strong> at Stanford - residency advisor
                <br><br>
                <a href="../" class="evidence-tag">View Full CV</a>`,

            'coauthors': `<strong>Collaborators</strong>
                <br><br>
                Dr. Hadley works with researchers at top institutions on cancer research, AI in medicine, and healthcare technology.
                <br><br>
                Key collaborators include:
                <br>- <strong>Atul Butte</strong> (UCSF) - big data in medicine
                <br>- <strong>James Pan</strong> (Stanford) - bioinformatics
                <br>- <strong>Marina Sirota</strong> (UCSF) - computational biology
                <br>- <strong>Mark Musen</strong> (Stanford) - medical informatics
                <br>- <strong>David Metcalf</strong> (UCF) - healthcare technology
                <br><br>
                <a href="https://scholar.google.com/citations?user=2o8ORCAAAAAJ&hl" class="evidence-tag">Google Scholar</a>`,

            'clinical': `<strong>Clinical Experience</strong>
                <br><br>
                Dr. Hadley is a physician who has read over <strong>20,000 mammograms</strong> to help detect breast cancer.
                <br><br>
                He works with cancer care teams to help patients understand their diagnosis and treatment options.
                <br><br>
                He created <strong>MAMMOCHAT</strong> - an AI assistant that helps breast oncology teams provide better care.
                <br><br>
                <a href="https://clinicaltrials.gov/study/NCT06604078" class="evidence-tag">NCT06604078</a>
                <a href="https://mammochat.com" class="evidence-tag">MammoChat.com</a>`,

            'canonic': `<strong>CANONIC</strong>
                <br><br>
                CANONIC is a system Dr. Hadley created to make AI <strong>trustworthy and accountable</strong>.
                <br><br>
                Think of it like a constitution for AI - a set of rules that AI systems must follow, with ways to prove they're following them.
                <br><br>
                This is especially important in healthcare, where AI decisions can affect patient lives.
                <br><br>
                <a href="https://canonic-foundation.github.io" class="evidence-tag">CANONIC Foundation</a>
                <a href="https://github.com/canonic-foundation" class="evidence-tag">GitHub</a>`,

            'mammochat': `<strong>MAMMOCHAT</strong>
                <br><br>
                MAMMOCHAT is an AI assistant that helps doctors and patients with <strong>breast cancer care</strong>.
                <br><br>
                It answers questions, explains test results, and helps coordinate care - all while keeping a clear record of what it says and why.
                <br><br>
                It's being tested at <strong>AdventHealth</strong> and is supported by a <strong>$2 million</strong> grant from the Florida Cancer Innovation Fund.
                <br><br>
                <a href="https://mammochat.com" class="evidence-tag">MammoChat.com</a>
                <a href="https://clinicaltrials.gov/study/NCT06604078" class="evidence-tag">NCT06604078</a>`,

            'evidence': `<strong>How This Works</strong>
                <br><br>
                Unlike a traditional CV, every claim here links to <strong>real proof</strong>.
                <br><br>
                - Publications link to <a href="https://ncbi.nlm.nih.gov/myncbi/dexter.hadley.1/bibliography/public">PubMed</a>
                <br>- Code links to <a href="https://github.com/hadleylab-dexter">GitHub</a>
                <br>- Grants link to award letters
                <br>- Clinical trials link to <a href="https://clinicaltrials.gov">ClinicalTrials.gov</a>
                <br><br>
                The full source document with all evidence links is available on GitHub.
                <br><br>
                <a href="https://github.com/hadleylab-dexter/hadleylab-dexter.github.io/blob/main/hadleylab/VITAE/VITAE.md" class="evidence-tag">Source Document</a>`,

            'default': `I can answer questions about <strong>Dr. Dexter Hadley</strong>.
                <br><br>
                Try asking about:
                <br>- <strong>Background</strong> - Where did he train?
                <br>- <strong>Clinical work</strong> - What does he do as a doctor?
                <br>- <strong>Publications</strong> - Research papers and book
                <br>- <strong>MAMMOCHAT</strong> - The breast cancer AI assistant
                <br>- <strong>CANONIC</strong> - Making AI trustworthy
                <br><br>
                Or view the <a href="../">full CV</a>.`
        };

        function formatPublication(pub) {
            let response = `<strong>${pub.title}</strong>
                <br><br>
                <em>${pub.journal}</em> (${pub.year})
                <br><br>
                ${pub.summary}`;

            if (pub.coauthors && pub.coauthors.length > 0) {
                response += `<br><br><strong>Co-authors:</strong> ${pub.coauthors.join(', ')}`;
            }

            if (pub.pmid) {
                response += `<br><br><a href="https://pubmed.ncbi.nlm.nih.gov/${pub.pmid}" class="evidence-tag">PubMed</a>`;
            } else if (pub.doi) {
                response += `<br><br><a href="https://doi.org/${pub.doi}" class="evidence-tag">View Paper</a>`;
            }

            return response;
        }

        function formatManuscript(ms) {
            return `<strong>${ms.title}</strong>
                <br><br>
                <em>Status: ${ms.status}</em> (${ms.year})
                <br><br>
                ${ms.summary}`;
        }

        function findPublication(text) {
            const lower = text.toLowerCase();

            // Check each publication
            for (const pub of publications) {
                // Check title words
                const titleWords = pub.title.toLowerCase().split(/\s+/);
                for (const word of titleWords) {
                    if (word.length > 4 && lower.includes(word)) {
                        return pub;
                    }
                }

                // Check keywords
                for (const kw of pub.keywords) {
                    if (lower.includes(kw)) {
                        return pub;
                    }
                }

                // Check journal
                if (lower.includes(pub.journal.toLowerCase())) {
                    return pub;
                }

                // Check year
                if (lower.includes(pub.year.toString())) {
                    // Need more context than just year
                    if (lower.includes('paper') || lower.includes('publication') || lower.includes('article')) {
                        return pub;
                    }
                }

                // Check co-authors
                if (pub.coauthors) {
                    for (const author of pub.coauthors) {
                        const lastName = author.split(' ').pop().toLowerCase();
                        if (lower.includes(lastName) && lastName.length > 3) {
                            return pub;
                        }
                    }
                }
            }

            // Check manuscripts
            for (const ms of manuscripts) {
                for (const kw of ms.keywords) {
                    if (lower.includes(kw) && lower.includes('paper')) {
                        return ms;
                    }
                }
            }

            return null;
        }

        function sendMessage() {
            const input = document.getElementById('userInput');
            const text = input.value.trim();
            if (!text) return;

            addMessage('You', text, false);
            input.value = '';

            setTimeout(() => {
                const response = getResponse(text);
                addMessage('DEXTER VITAE', response, true);
            }, 400);
        }

        function askQuestion(q) {
            document.getElementById('userInput').value = q;
            sendMessage();
        }

        function addMessage(role, text, isAgent) {
            const messages = document.getElementById('messages');
            const div = document.createElement('div');
            div.className = 'message';
            div.innerHTML = `
                <div class="message-avatar ${isAgent ? 'agent' : ''}">${isAgent ? 'D' : 'U'}</div>
                <div class="message-content">
                    <div class="message-role">${role}</div>
                    <div class="message-text">${text}</div>
                </div>
            `;
            messages.appendChild(div);
            messages.scrollTop = messages.scrollHeight;
        }

        function getResponse(text) {
            const lower = text.toLowerCase();

            // Check for specific publication queries first
            const pub = findPublication(text);
            if (pub) {
                if (pub.status) {
                    return formatManuscript(pub);
                }
                return formatPublication(pub);
            }

            // General topic responses
            if (lower.includes('education') || lower.includes('degree') || lower.includes('phd') || lower.includes('school') || lower.includes('train') || lower.includes('study') || lower.includes('university')) return responses.education;
            if (lower.includes('position') || lower.includes('job') || lower.includes('employ') || lower.includes('professor') || lower.includes('career') || lower.includes('work') || lower.includes('role')) return responses.positions;
            if (lower.includes('publication') || lower.includes('paper') || lower.includes('journal') || lower.includes('article') || lower.includes('pubmed') || lower.includes('research') || lower.includes('publish')) return responses.publications;
            if (lower.includes('grant') || lower.includes('fund') || lower.includes('bloomberg') || lower.includes('fcif') || lower.includes('1.9') || lower.includes('million') || lower.includes('money')) return responses.grants;
            if (lower.includes('ip') || lower.includes('patent') || lower.includes('idf') || lower.includes('invention') || lower.includes('disclosure')) return responses.ip;
            if (lower.includes('mentor') || lower.includes('advisor') || lower.includes('teacher')) return responses.mentors;
            if (lower.includes('coauthor') || lower.includes('co-author') || lower.includes('collaborat')) return responses.coauthors;
            if (lower.includes('clinical') || lower.includes('mammograph') || lower.includes('patient') || lower.includes('doctor') || lower.includes('physician') || lower.includes('breast')) return responses.clinical;
            if (lower.includes('canonic') || lower.includes('detros') || lower.includes('governance') || lower.includes('constitutional') || lower.includes('trustworthy')) return responses.canonic;
            if (lower.includes('mammochat') || lower.includes('adventhealth') || lower.includes('oncology')) return responses.mammochat;
            if (lower.includes('evidence') || lower.includes('proof') || lower.includes('verify') || lower.includes('source') || lower.includes('how') || lower.includes('work')) return responses.evidence;

            return responses.default;
        }
    </script>
</body>
</html>
